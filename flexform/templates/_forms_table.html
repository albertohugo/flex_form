{% load static %}
{% load i18n %}
<table id="forms-table" class="table" style="margin-bottom: 0px;">
  <thead>
  <tr>
    <th class="text-center " scope="col"></th>
    <th class="text-center" scope="col">#</th>
    <th class="text-center d-none d-lg-table-cell" scope="col">{% trans 'Id' %}</th>
    <th class="text-center" scope="col">{% trans 'Name' %}</th>
    <th class="text-center d-none d-lg-table-cell" scope="col">{% trans 'Created by' %}</th>
    <th class="text-center d-none d-lg-table-cell" scope="col">{% trans 'Status' %}</th>
    <th class="text-center d-none d-lg-table-cell" scope="col">{% trans 'Visibility' %}</th>
    <th class="text-center d-none d-lg-table-cell" scope="col">{% trans 'Created at' %}</th>
    {% if not user.is_anonymous %}
    <th class="text-center " scope="col">{% trans 'Actions' %}</th>
    {% endif %}
  </tr>
  </thead>
  {% for form in forms %}
  <tbody>
   <tr >
       <td class="accordion-toggle collapsed" id="accordion1" data-toggle="collapse" data-parent="#{{ form.id }}" href="#{{ form.id }}">+</td>
      <th class="text-center" scope="row">{{ forloop.counter }}</th>
      <td class="text-center d-none d-lg-table-cell">{{ form.id }}</td>
      <td class="text-center">{{ form.title }}</td>
      <td class="text-center d-none d-lg-table-cell">{{ form.created_by }}</td>
          <td class="text-center d-none d-lg-table-cell">
       {% if form.status == True %}
        <img src="{% static "open-iconic-master/svg/circle-check_w.svg" %}" alt="Activated" width="15" height="15">
        {% else %}
       <img src="{% static "open-iconic-master/svg/circle-x_w.svg" %}" alt="Deactivated" width="15" height="15">
      {% endif %}
      </td>
        <td class="text-center d-none d-lg-table-cell">
          {% if form.private == True %}
        <img src="{% static "open-iconic-master/svg/lock-locked.svg" %}" alt="Activated" width="15" height="15">
        {% else %}
       <img src="{% static "open-iconic-master/svg/lock-unlocked.svg" %}" alt="Deactivated" width="15" height="15">
      {% endif %}
       </td>
      <td class="text-center d-none d-lg-table-cell">{{ form.timestamp }}</td>
       {% if not user.is_anonymous %}
       <td class="text-center ">
        <!-- Read form buttons -->
        <button type="button" class="bs-modal read-form btn btn-sm btn-secondary " style="background-color: #1b6ca8; " data-form-url="{% url 'read_form' form.pk %}">
          <img src="{% static "open-iconic-master/svg/eye_w.svg" %}" width="13" height="13">
        </button>
           {% if form.created_by == user %}
            <!-- Update form buttons -->
            <button type="button" class="update-form btn btn-sm btn-secondary d-none d-lg-table-cell" style="background-color: #1b6ca8;" data-form-url="{% url 'update_form' form.pk %}">
               <img src="{% static "open-iconic-master/svg/pencil_w.svg" %}" width="13" height="13">
            </button>
            <!-- Delete form buttons -->
            <button type="button" class="bs-modal delete-form btn btn-sm btn-secondary d-none d-lg-table-cell" data-form-url="{% url 'delete_form' form.pk %}">
               <img src="{% static "open-iconic-master/svg/trash_w.svg" %}" width="13" height="13">
            </button>
           <button type="button" class="bs-modal create-object btn btn-sm btn-secondary"  style="background-color: #393e46;"  data-form-url="{% url 'create_object' form.pk %}">
              <img src="{% static "open-iconic-master/svg/plus_w.svg" %}" width="13" height="13" >
            </button>
        {% endif %}
      </td>
       {% endif %}
    </tr>
    <tr class="hide-table-padding" style="padding: 0px;">
        <td class="card-footer" colspan="10"  style="padding: 0px;">
        <div id={{ form.id }} class="collapse in p-3" >
            <table  class="table table-sm" style="margin-bottom: 0px;">
              <thead>
              <tr class="table-active">
                <th class="text-center" scope="col" width="50%">{% trans 'Object' %}</th>
                   {% if not user.is_anonymous %}
                <th class="text-center" scope="col" width="50%">{% trans 'Actions' %}</th>
                    {% endif %}
               </tr>
              </thead>
                </table>
            {% for object in objects %}
                {% if form == object.form %}
 <table  class="table table-sm  " style="margin-bottom: 0px;">
                <tbody>
                <tr>
                    <td class="text-center" width="50%">{{ object.label }}</td>
                    {% if not user.is_anonymous %}
                    <td class="text-center  " width="50%">
                        <button type="button" class="bs-modal read-form btn btn-sm btn-secondary" style="background-color: #393e46;" data-form-url="{% url 'read_object' object.pk %}">
                  <img src="{% static "open-iconic-master/svg/eye_w.svg" %}" width="13" height="13">
                </button>
                        {% if form.created_by == user %}
                <!-- Update form buttons -->
                <button type="button" class="update-object btn btn-sm btn-secondary d-none d-lg-table-cell" style="background-color: #393e46;" data-form-url="{% url 'update_object' object.pk %}">
                  <img src="{% static "open-iconic-master/svg/pencil_w.svg" %}" width="13" height="13">
                </button>
                <!-- Delete form buttons -->
                <button type="button" class="bs-modal delete-form btn btn-sm btn-secondary d-none d-lg-table-cell" data-form-url="{% url 'delete_object' object.pk %}">
                  <img src="{% static "open-iconic-master/svg/trash_w.svg" %}" width="13" height="13">
                </button>
                        {% endif %}
                    </td>
                    {% endif %}
                </tr>
 </tbody>
  </table>
            {% endif %}
              {% endfor %}
        </div>
        </td>
    </tr>
  {% endfor %}
  </tbody>
</table>
